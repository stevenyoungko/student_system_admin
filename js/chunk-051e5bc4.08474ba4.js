(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-051e5bc4"],{1951:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dialog-container__content beauty-scroll",style:{"max-height":t.contentHeight}},[t._t("default")],2)},n=[],o={name:"ScrollableDialogContainer",props:{contentHeight:{type:String,default:"55vh"}}},s=o,i=(a("d349"),a("2877")),c=Object(i["a"])(s,r,n,!1,null,"fbeac754",null);e["a"]=c.exports},"30ee":function(t,e,a){},3568:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("PageContainer",{scopedSlots:t._u([{key:"control",fn:function(){return[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.openDialog("add")}}},[t._v("新建")])]},proxy:!0},{key:"content",fn:function(){return[a("a-table",{attrs:{columns:t.columns,"data-source":t.tableData,bordered:"",loading:t.tableLoading,"row-key":"id",size:"small",pagination:{pageSize:11}},scopedSlots:t._u([{key:"type",fn:function(e){return[a("span",{domProps:{textContent:t._s("default"===e?"預設":"自訂")}})]}},{key:"status",fn:function(e){return[a("a-tag",{attrs:{color:"1"===e?"green":"red"}},[t._v(t._s("1"===e?"啟用":"停用")+" ")])]}},{key:"operation",fn:function(e,r){return[a("DefaultButton",{staticStyle:{"margin-right":"6px"},attrs:{type:"primary",text:"修改"},on:{click:function(e){return t.openDialog("edit",r)}}}),a("DefaultButton",{staticStyle:{"margin-right":"6px"},attrs:{type:"danger",text:"停用"}})]}}])})]},proxy:!0}])},[[a("a-modal",{attrs:{title:t.dialog.title,"mask-closable":!1,"cancel-text":"取消","ok-text":"提交","confirm-loading":t.modalLoading},on:{ok:t.submit,cancel:t.handleCancel},model:{value:t.dialog.visible,callback:function(e){t.$set(t.dialog,"visible",e)},expression:"dialog.visible"}},[a("ScrollableDialogContainer",[a("a-form-model",{ref:"ruleForm",attrs:{model:t.form,rules:t.rules,"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[t.isAdd?a("a-form-model-item",{attrs:{label:"招生名稱",prop:"recruit_name"}},[a("a-input",{model:{value:t.form.recruit_name,callback:function(e){t.$set(t.form,"recruit_name",e)},expression:"form.recruit_name"}})],1):t._e(),t.isEdit&&"custom"===t.dialog.type?a("a-form-model-item",{attrs:{label:"招生名稱",prop:"recruit_name"}},[a("a-input",{model:{value:t.form.recruit_name,callback:function(e){t.$set(t.form,"recruit_name",e)},expression:"form.recruit_name"}})],1):t._e(),t.isAdd?a("a-form-model-item",{attrs:{label:"起迄时间",prop:"dateRange"}},[a("a-range-picker",{attrs:{"value-format":"YYYY-MM-DD",placeholder:["开始日期","结束日期"]},model:{value:t.form.dateRange,callback:function(e){t.$set(t.form,"dateRange",e)},expression:"form.dateRange"}})],1):t._e(),t.isEdit&&"custom"===t.dialog.type?a("a-form-model-item",{attrs:{label:"起迄时间",prop:"dateRange"}},[a("a-range-picker",{attrs:{"value-format":"YYYY-MM-DD",placeholder:["开始日期","结束日期"]},model:{value:t.form.dateRange,callback:function(e){t.$set(t.form,"dateRange",e)},expression:"form.dateRange"}})],1):t._e(),t.isEdit?a("a-form-model-item",{attrs:{label:"狀態",prop:"status"}},[a("a-switch",{model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1):t._e()],1)],1)],1)]],2)},n=[],o=a("1da1"),s=(a("96cf"),a("4e2a")),i=a("c7e8"),c=a("1951"),l=a("b775"),u=function(){return Object(l["a"])({url:"/api/recruit/list",method:"GET"})},d=function(t){return Object(l["a"])({url:"/api/recruit/new",method:"POST",data:t})},m=function(t,e){return Object(l["a"])({url:"/api/recruit/".concat(t),method:"PUT",data:e})},f=a("c1df"),p=a.n(f),g={name:"Admissions",components:{PageContainer:s["a"],DefaultButton:i["a"],ScrollableDialogContainer:c["a"]},data:function(){var t=[{title:"招生名稱",dataIndex:"recruit_name"},{title:"類型",dataIndex:"type",scopedSlots:{customRender:"type"}},{title:"建立者",dataIndex:"account_name"},{title:"教學中心名稱",dataIndex:"branch_name"},{title:"狀態",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"起始時間",dataIndex:"start_date"},{title:"結束時間",dataIndex:"end_date"},{title:"操作",dataIndex:"operation",width:"20%",scopedSlots:{customRender:"operation"}}];return{columns:t,tableData:[],dialog:{title:"",mode:"",visible:!1,id:"",type:""},labelCol:{span:4},wrapperCol:{span:14},form:{recruit_name:"",dateRange:["",""],status:""},rules:{recruit_name:[{required:!0,message:"必填",trigger:"blur"}],dateRange:[{required:!0,message:"必填",trigger:"change"}]},modalLoading:!1,tableLoading:!1}},computed:{isEdit:function(){return"edit"===this.dialog.mode},isAdd:function(){return"add"===this.dialog.mode}},created:function(){this.getRecruitList()},methods:{getRecruitList:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.tableLoading=!0,e.prev=1,e.next=4,u();case 4:a=e.sent,r=a.data,t.tableData=r,e.next=11;break;case 9:e.prev=9,e.t0=e["catch"](1);case 11:t.tableLoading=!1;case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))()},openDialog:function(t,e){this.dialog.visible=!0,this.dialog.mode=t;var a={recruit_name:"",status:"",dateRange:[]};switch(t){case"add":this.dialog.title="新建",this.dialog.id="",this.dialog.type="";break;case"edit":this.dialog.title="修改",this.dialog.id=e.id,this.dialog.type=e.type,a.recruit_name=e.recruit_name,a.status="1"===e.status,a.dateRange[0]=p()(e.start_date),a.dateRange[1]=p()(e.end_date),Object.assign(this.form,a);break;default:break}},submit:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.modalLoading=!0,"add"!==t.dialog.mode){e.next=15;break}return e.prev=2,e.next=5,t.$refs.ruleForm.validate();case 5:return e.next=7,d({recruit_name:t.form.recruit_name,start_date:t.form.dateRange[0],end_date:t.form.dateRange[1]});case 7:t.$message.success("新增成功"),t.dialog.visible=!1,t.handleCancel(),t.getRecruitList(),e.next=15;break;case 13:e.prev=13,e.t0=e["catch"](2);case 15:if("edit"!==t.dialog.mode){e.next=32;break}return e.prev=16,e.next=19,t.$refs.ruleForm.validate();case 19:return a={},"default"===t.dialog.type&&(a.status=t.form.status),"custom"===t.dialog.type&&(a.recruit_name=t.form.recruit_name,a.start_date=p()(t.form.dateRange[0]).format("YYYY-MM-DD HH:mm:ss"),a.end_date=p()(t.form.dateRange[1]).format("YYYY-MM-DD HH:mm:ss"),a.status=t.form.status),e.next=24,m(t.dialog.id,a);case 24:t.$message.success("更新成功"),t.dialog.visible=!1,t.handleCancel(),t.getRecruitList(),e.next=32;break;case 30:e.prev=30,e.t1=e["catch"](16);case 32:t.modalLoading=!1;case 33:case"end":return e.stop()}}),e,null,[[2,13],[16,30]])})))()},resetForm:function(){return{recruit_name:"",dateRange:[],status:""}},handleCancel:function(){this.$refs.ruleForm.resetFields(),Object.assign(this.form,this.resetForm())}}},b=g,h=a("2877"),v=Object(h["a"])(b,r,n,!1,null,"5bce584c",null);e["default"]=v.exports},"407a":function(t,e,a){"use strict";a("30ee")},"4e2a":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-container"},[this.$slots["query-control"]?a("div",{staticClass:"control"},[t._t("query-control")],2):t._e(),this.$slots["query"]&&this.$slots["query-action"]?a("div",{class:["query-group",this.$slots["control"]?"no-bottom-border":""]},[this.$slots["query"]?a("div",{staticClass:"query"},[t._t("query")],2):t._e(),this.$slots["query-action"]?a("div",{staticClass:"query-action"},[t._t("query-action")],2):t._e()]):t._e(),this.$slots["control"]?a("div",{staticClass:"control"},[t._t("control")],2):t._e(),this.$slots["content"]?a("div",{staticClass:"content"},[t._t("content")],2):t._e(),t._t("default")],2)},n=[],o={name:"PageContainer"},s=o,i=(a("780c"),a("2877")),c=Object(i["a"])(s,r,n,!1,null,"c24b28ae",null);e["a"]=c.exports},6351:function(t,e,a){},"780c":function(t,e,a){"use strict";a("6351")},"9fc7":function(t,e,a){},a15b:function(t,e,a){"use strict";var r=a("23e7"),n=a("44ad"),o=a("fc6a"),s=a("a640"),i=[].join,c=n!=Object,l=s("join",",");r({target:"Array",proto:!0,forced:c||!l},{join:function(t){return i.call(o(this),void 0===t?",":t)}})},c7e8:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-button",t._g(t._b({class:t.otherTypeClass},"a-button",t.$attrs,!1),t.$listeners),[t._v(" "+t._s(t.text)+" ")])},n=[],o=a("1da1"),s=(a("99af"),a("96cf"),a("159b"),a("a15b"),a("d81d"),a("b64b"),function(t){var e=document.head.appendChild(t).sheet,a=0;return function(t,r){return t.forEach((function(t,n){var o=Object.keys(r[n]).map((function(t){return t+":"+r[n][t]})).join(";\n"),s=e.insertRule(t+"{"+o+"}",e.cssRules.length);0===n&&(a=s)})),{sheet:e,firstIndex:a}}}(document.createElement("style"))),i={name:"CommonButton",props:{text:{type:String,required:!0,default:"展示用"}},data:function(){return{otherTypeClass:null,customedSheet:null}},computed:{isPresetTypes:function(){var t=/primary|dashed|danger|link|default/g;return t.test(this.$attrs.type)}},mounted:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getOtherButtonType();case 2:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){if(this.customedSheet){var t=this.customedSheet,e=t.sheet,a=t.firstIndex;if(e.cssRules.length<=a)for(var r=0;r<3;r++)e.deleteRule(0);else for(var n=0;n<3;n++)e.deleteRule(a)}},methods:{getOtherButtonType:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.$attrs.type||t.isPresetTypes){e.next=18;break}e.t0=t.$attrs.type,e.next="warning"===e.t0?4:"success"===e.t0?6:8;break;case 4:return t.otherTypeClass="button-warning",e.abrupt("break",16);case 6:return t.otherTypeClass="button-success",e.abrupt("break",16);case 8:if(t.$attrs.color){e.next=11;break}return console.warn('[CommonButton] attribute "type" 沒有匹配到對應的類型也沒有傳入自定義的 button 顏色，將使用 antd 預設類型: default'),e.abrupt("return");case 11:if(t.$attrs.color.default&&t.$attrs.color.textColor&&t.$attrs.color.hover&&t.$attrs.color.active){e.next=14;break}return console.warn('[CommonButton] attribute "color" 沒有傳入對應的 property\n              textColor: '.concat(t.$attrs.color.textColor,"\n              default: ").concat(t.$attrs.color.default,"\n              hover: ").concat(t.$attrs.color.hover,"\n              active: ").concat(t.$attrs.color.active,"\n              以致無法生成客製化按鈕，將使用 antd 預設類型: default")),e.abrupt("return");case 14:t.customedSheet=s([".button-customed-".concat(t._uid),".button-customed-".concat(t._uid,":hover, .button-customed-").concat(t._uid,":focus"),".button-customed-".concat(t._uid,":active")],[{color:t.$attrs.color.textColor,"background-color":t.$attrs.color.default,"border-color":t.$attrs.color.default},{color:t.$attrs.color.textColor,"background-color":t.$attrs.color.hover,"border-color":t.$attrs.color.hover},{"background-color":t.$attrs.color.active,"border-color":t.$attrs.color.active}]),t.otherTypeClass="button-customed-".concat(t._uid);case 16:e.next=19;break;case 18:return e.abrupt("return",null);case 19:case"end":return e.stop()}}),e)})))()}}},c=i,l=(a("407a"),a("2877")),u=Object(l["a"])(c,r,n,!1,null,"5a84affa",null);e["a"]=u.exports},d349:function(t,e,a){"use strict";a("9fc7")}}]);